# ğŸ—ï¸ ARCHITECTURE DIAGRAM

## CURRENT ARCHITECTURE (Refactored to Top-1%)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CLIENT LAYER                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  React 18 + Vite (Port 5173/80)                          â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚  â”‚
â”‚  â”‚  Components (Atomic Design)                               â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ Atoms: LoadingSpinner, VideoPlayer                â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ Molecules: CourseCard, Skeleton                   â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ Organisms: Navbar, Footer, ErrorBoundary          â”‚  â”‚
â”‚  â”‚    â””â”€â”€ Templates: Home, Login, CourseDetail              â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  State Management                                          â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ Context API (AuthContext)                          â”‚  â”‚
â”‚  â”‚    â””â”€â”€ Custom Hooks (useForm, useFetch, useDebounce)     â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  Routing (React Router v6)                                â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ Public Routes: /, /login, /signup, /course/:id    â”‚  â”‚
â”‚  â”‚    â””â”€â”€ Protected Routes: /my-courses                      â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  HTTP Client (Axios)                                       â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ Interceptors: Request/Response                     â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ Base URL: /api                                     â”‚  â”‚
â”‚  â”‚    â””â”€â”€ Credentials: withCredentials (HTTP-only cookies)   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†• HTTP/HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SECURITY LAYER (NEW!)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Helmet (Security Headers)                                â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ CSP (Content Security Policy)                      â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ HSTS (HTTP Strict Transport Security)             â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ X-Frame-Options: DENY                              â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ X-XSS-Protection: 1; mode=block                    â”‚  â”‚
â”‚  â”‚    â””â”€â”€ X-Content-Type-Options: nosniff                    â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  Rate Limiting (express-rate-limit)                       â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ Auth endpoints: 5 req/15min                        â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ Promo validation: 10 req/hour                      â”‚  â”‚
â”‚  â”‚    â””â”€â”€ General API: 100 req/15min                         â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  Input Sanitization (express-mongo-sanitize)              â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ Remove $ and . from user input                     â”‚  â”‚
â”‚  â”‚    â””â”€â”€ Prevent NoSQL injection attacks                    â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  Compression (gzip)                                        â”‚  â”‚
â”‚  â”‚    â””â”€â”€ Reduces response size by ~70%                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†• Filtered Requests
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SERVER LAYER (MVC)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Express.js (Port 5000)                                   â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚  â”‚
â”‚  â”‚  â”‚  ROUTES         â”‚  â”‚  MIDDLEWARES    â”‚               â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚  â”‚
â”‚  â”‚  â”‚ /api/auth       â”‚  â”‚ protect         â”‚               â”‚  â”‚
â”‚  â”‚  â”‚ /api/courses    â”‚  â”‚ optionalAuth    â”‚               â”‚  â”‚
â”‚  â”‚  â”‚ /api/subscribe  â”‚  â”‚ CORS            â”‚               â”‚  â”‚
â”‚  â”‚  â”‚ /api/my-courses â”‚  â”‚ requestLogger   â”‚               â”‚  â”‚
â”‚  â”‚  â”‚ /api/validate-  â”‚  â”‚ errorHandler    â”‚               â”‚  â”‚
â”‚  â”‚  â”‚   promo         â”‚  â”‚ rateLimiters    â”‚               â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚  â”‚
â”‚  â”‚           â†“                    â†“                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚  â”‚
â”‚  â”‚  â”‚         CONTROLLERS                       â”‚            â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚  â”‚
â”‚  â”‚  â”‚ authController                            â”‚            â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ signup(), login(), logout()        â”‚            â”‚  â”‚
â”‚  â”‚  â”‚   â””â”€â”€ getMe(), verifyAuth()              â”‚            â”‚  â”‚
â”‚  â”‚  â”‚                                           â”‚            â”‚  â”‚
â”‚  â”‚  â”‚ courseController                          â”‚            â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ getAllCourses()                    â”‚            â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ getCourseById()                    â”‚            â”‚  â”‚
â”‚  â”‚  â”‚   â””â”€â”€ seedCourses()                      â”‚            â”‚  â”‚
â”‚  â”‚  â”‚                                           â”‚            â”‚  â”‚
â”‚  â”‚  â”‚ subscriptionController                    â”‚            â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ subscribe()                        â”‚            â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ getMyCourses()                     â”‚            â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ validatePromo()                    â”‚            â”‚  â”‚
â”‚  â”‚  â”‚   â””â”€â”€ getSubscriptionStatus()            â”‚            â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚  â”‚
â”‚  â”‚           â†“                                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚  â”‚
â”‚  â”‚  â”‚         MODELS (Mongoose ODM)            â”‚            â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚  â”‚
â”‚  â”‚  â”‚ User                                      â”‚            â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ name, email, password              â”‚            â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ Indexes: email, (email+createdAt)  â”‚            â”‚  â”‚
â”‚  â”‚  â”‚   â””â”€â”€ Methods: comparePassword()         â”‚            â”‚  â”‚
â”‚  â”‚  â”‚                                           â”‚            â”‚  â”‚
â”‚  â”‚  â”‚ Course                                    â”‚            â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ title, description, price, etc.    â”‚            â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ videoUrl, previewVideoId           â”‚            â”‚  â”‚
â”‚  â”‚  â”‚   â””â”€â”€ Indexes: (price+level), isActive   â”‚            â”‚  â”‚
â”‚  â”‚  â”‚                                           â”‚            â”‚  â”‚
â”‚  â”‚  â”‚ Subscription                              â”‚            â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ userId, courseId, pricePaid        â”‚            â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ promoCodeUsed, discountApplied     â”‚            â”‚  â”‚
â”‚  â”‚  â”‚   â””â”€â”€ Indexes: (userId+courseId), userId â”‚            â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚  â”‚
â”‚  â”‚           â†“                                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚  â”‚
â”‚  â”‚  â”‚         UTILITIES                         â”‚            â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚  â”‚
â”‚  â”‚  â”‚ errorHandler: ApiError, asyncHandler     â”‚            â”‚  â”‚
â”‚  â”‚  â”‚ validators: email, password, promo       â”‚            â”‚  â”‚
â”‚  â”‚  â”‚ generateToken: JWT + HTTP-only cookie    â”‚            â”‚  â”‚
â”‚  â”‚  â”‚ logger (Winston): info, error, debug     â”‚            â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†• Mongoose
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     DATABASE LAYER                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  MongoDB (Port 27017)                                     â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚  â”‚
â”‚  â”‚  Collections:                                             â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ users (with email index)                          â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ courses (with text search index)                  â”‚  â”‚
â”‚  â”‚    â””â”€â”€ subscriptions (with compound indexes)             â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  Features:                                                 â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ Replica Set (Production)                          â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ Sharding (Horizontal Scaling)                     â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ Automated Backups                                 â”‚  â”‚
â”‚  â”‚    â””â”€â”€ Connection Pooling                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   INFRASTRUCTURE LAYER (NEW!)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Docker Containers                                        â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ Frontend: Nginx + React Build                     â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ Backend: Node.js 18 Alpine                        â”‚  â”‚
â”‚  â”‚    â””â”€â”€ Database: MongoDB 7.0                             â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  CI/CD Pipeline (GitHub Actions)                          â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ Automated Tests (Jest, ESLint)                    â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ Docker Image Build                                â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ Security Scanning                                 â”‚  â”‚
â”‚  â”‚    â””â”€â”€ Automated Deployment                              â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  Monitoring & Logging                                     â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ Winston: Structured logs â†’ Files/CloudWatch       â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ Morgan: HTTP request logging                      â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ Health Checks: /api/health                        â”‚  â”‚
â”‚  â”‚    â””â”€â”€ Error Tracking: Sentry (recommended)              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## DATA FLOW DIAGRAM

### Authentication Flow (JWT in HTTP-only Cookies)
```
User â†’ [POST /api/auth/signup] â†’ authController.signup()
                                      â†“
                              Validate Input (validators.js)
                                      â†“
                              Hash Password (bcrypt)
                                      â†“
                              Save User â†’ MongoDB
                                      â†“
                              Generate JWT (utils/generateToken.js)
                                      â†“
                              Set HTTP-only Cookie (secure, sameSite)
                                      â†“
                              Return User Data (no password)
```

### Course Subscription Flow (with Promo Code)
```
User â†’ [POST /api/validate-promo] â†’ Rate Limiter (10 req/hour)
                                         â†“
                              subscriptionController.validatePromo()
                                         â†“
                              Check Promo Code (BFSALE25)
                                         â†“
                              Calculate Discount (50%)
                                         â†“
                              Return Discounted Price
                                         â†“
User â†’ [POST /api/subscribe] â†’ Auth Middleware (protect)
                                    â†“
                              Check if Already Subscribed
                                    â†“
                              Validate Promo (if paid course)
                                    â†“
                              Create Subscription Record
                                    â†“
                              Return Subscription Details
```

---

## FOLDER STRUCTURE (Best Practices)

```
cyberWarFare/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ ci-cd.yml                 # CI/CD pipeline
â”‚
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ db.js                     # MongoDB connection
â”‚   â”‚   â”œâ”€â”€ constants.js              # App constants
â”‚   â”‚   â””â”€â”€ validateEnv.js            # Environment validation
â”‚   â”‚
â”‚   â”œâ”€â”€ controllers/                  # Business logic
â”‚   â”‚   â”œâ”€â”€ authController.js
â”‚   â”‚   â”œâ”€â”€ courseController.js
â”‚   â”‚   â””â”€â”€ subscriptionController.js
â”‚   â”‚
â”‚   â”œâ”€â”€ middlewares/                  # Request processing
â”‚   â”‚   â”œâ”€â”€ authMiddleware.js         # JWT verification
â”‚   â”‚   â”œâ”€â”€ commonMiddleware.js       # CORS, logging
â”‚   â”‚   â””â”€â”€ security.js               # Security configs
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                       # Data schemas
â”‚   â”‚   â”œâ”€â”€ User.js
â”‚   â”‚   â”œâ”€â”€ Course.js
â”‚   â”‚   â”œâ”€â”€ Subscription.js
â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”‚
â”‚   â”œâ”€â”€ routes/                       # API endpoints
â”‚   â”‚   â”œâ”€â”€ authRoutes.js
â”‚   â”‚   â”œâ”€â”€ courseRoutes.js
â”‚   â”‚   â”œâ”€â”€ subscriptionRoutes.js
â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                        # Helper functions
â”‚   â”‚   â”œâ”€â”€ errorHandler.js
â”‚   â”‚   â”œâ”€â”€ generateToken.js
â”‚   â”‚   â”œâ”€â”€ validators.js
â”‚   â”‚   â””â”€â”€ logger.js                 # Winston logger
â”‚   â”‚
â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â”œâ”€â”€ seed.js                   # Database seeding
â”‚   â”‚   â””â”€â”€ health-check.js           # Health monitoring
â”‚   â”‚
â”‚   â”œâ”€â”€ logs/                         # Log files (production)
â”‚   â”‚   â”œâ”€â”€ error.log
â”‚   â”‚   â””â”€â”€ combined.log
â”‚   â”‚
â”‚   â”œâ”€â”€ tests/                        # Test files
â”‚   â”‚   â”œâ”€â”€ unit/
â”‚   â”‚   â”œâ”€â”€ integration/
â”‚   â”‚   â””â”€â”€ e2e/
â”‚   â”‚
â”‚   â”œâ”€â”€ .env.example
â”‚   â”œâ”€â”€ .gitignore
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ server.js                     # Entry point
â”‚
â”œâ”€â”€ client/
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â”œâ”€â”€ logo.png
â”‚   â”‚   â””â”€â”€ favicon.svg
â”‚   â”‚
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/                      # API layer
â”‚   â”‚   â”‚   â”œâ”€â”€ axios.js              # Axios config
â”‚   â”‚   â”‚   â””â”€â”€ index.js              # API endpoints
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ components/               # Reusable components
â”‚   â”‚   â”‚   â”œâ”€â”€ Navbar.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Footer.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ CourseCard.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ VideoPlayer.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ LoadingSpinner.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Skeleton.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ErrorBoundary.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ProtectedRoute.jsx
â”‚   â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ context/                  # Global state
â”‚   â”‚   â”‚   â”œâ”€â”€ AuthContext.jsx
â”‚   â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ hooks/                    # Custom hooks
â”‚   â”‚   â”‚   â”œâ”€â”€ useForm.js
â”‚   â”‚   â”‚   â”œâ”€â”€ useFetch.js
â”‚   â”‚   â”‚   â”œâ”€â”€ useDebounce.js
â”‚   â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ pages/                    # Route pages
â”‚   â”‚   â”‚   â”œâ”€â”€ Home.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Login.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Signup.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ CourseDetail.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ MyCourses.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ NotFound.jsx
â”‚   â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ utils/                    # Helper functions
â”‚   â”‚   â”‚   â”œâ”€â”€ helpers.js
â”‚   â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ App.jsx                   # Root component
â”‚   â”‚   â”œâ”€â”€ main.jsx                  # Entry point
â”‚   â”‚   â””â”€â”€ index.css                 # Global styles
â”‚   â”‚
â”‚   â”œâ”€â”€ .env.example
â”‚   â”œâ”€â”€ .gitignore
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ nginx.conf                    # Nginx config
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ tailwind.config.js
â”‚   â”œâ”€â”€ vite.config.js
â”‚   â””â”€â”€ index.html
â”‚
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
â””â”€â”€ IMPLEMENTATION_GUIDE.md
```

---

## SECURITY LAYERS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 1: Network Security                   â”‚
â”‚   â€¢ HTTPS/TLS encryption                    â”‚
â”‚   â€¢ Firewall rules                          â”‚
â”‚   â€¢ DDoS protection (Cloudflare)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 2: Application Security (Helmet)      â”‚
â”‚   â€¢ CSP headers                              â”‚
â”‚   â€¢ HSTS                                     â”‚
â”‚   â€¢ XSS protection                           â”‚
â”‚   â€¢ Clickjacking protection                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 3: Rate Limiting                      â”‚
â”‚   â€¢ Prevent brute force attacks             â”‚
â”‚   â€¢ IP-based throttling                     â”‚
â”‚   â€¢ Endpoint-specific limits                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 4: Input Validation & Sanitization    â”‚
â”‚   â€¢ MongoDB injection prevention            â”‚
â”‚   â€¢ XSS input filtering                     â”‚
â”‚   â€¢ Schema validation                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 5: Authentication & Authorization     â”‚
â”‚   â€¢ JWT in HTTP-only cookies                â”‚
â”‚   â€¢ Secure password hashing (bcrypt)        â”‚
â”‚   â€¢ Protected routes middleware             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 6: Database Security                  â”‚
â”‚   â€¢ Connection encryption                   â”‚
â”‚   â€¢ Access control (credentials)            â”‚
â”‚   â€¢ Indexed queries (performance)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

This architecture achieves **production-grade** security and scalability! ğŸš€
